"use strict";function ownKeys(n,e){var t,a=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),a.push.apply(a,t)),a}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var smsFlag=!1,smsShowFun=null,hasScroll=!1,isWeixin=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},$t=function(e){return e},interwords=("local"==__ce.env?"http://"+tenant.makeDomain:"")+"/npublic/commonjs/language/"+("hn"==tenant.language?"es":tenant.language)+".js";$require([interwords],function(){$t=function(e,n){var t=window.i18n[e]||"";return n&&0<n.length&&n.forEach(function(e,n){t=t.replace("{"+n+"}",e)}),t||e}}),$(function(){window.pageObj&&1==window.pageObj.isHomePage&&gray(),"portal-saas-mall"!=tenant.unittype&&(festival(),smartServiceInit()),268516!=tenant.tenantId&&"portal-saas-mall"!=tenant.unittype&&preventFish(),isWeixin()&&"portal-saas-mall"!=tenant.unittype&&wxShare(),"miniprogram"===window.__wxjs_environment&&$require(["/npublic/commonjs/jweixin/jweixin.js","pl_util"],function(){wx.miniProgram.postMessage({data:{shareTitle:encodeURIComponent(document.title),shareDesc:getmeta("description"),shareUrl:encodeURIComponent(location.href)}})}),accessLimit(),wxPoint(),ttsPlay();var e=$.getSearch();e.openId&&sessionStorage.setItem("sdkOpenId",e.openId);window.pageObj&&-1<["199391","244822","202597"].indexOf(window.pageObj.appId)&&"3"==window.pageObj.pageType&&customMd(),setReferrer()});var setReferrer=function(){var n,e,t=document.referrer;!t||(n=t.split("//")[1].split("/")[0])!=location.hostname&&(e={referrer:t},-1<location.href.indexOf("?")&&(e.sem=location.href.split("?")[1]),(t=[{name:"百度",key:"baidu.com"},{name:"Google",key:"google.com"},{name:"搜狗",key:"sogou.com"},{name:"Yahoo",key:"yahoo.com"},{name:"中国雅虎",key:"yahoo.cn"},{name:"搜搜",key:"soso.com"},{name:"有道",key:"youdao.com"},{name:"狗狗搜索",key:"gougou.com"},{name:"Bing",key:"bing.com"},{name:"360搜索",key:"so.com"},{name:"即刻搜索",key:"jike.com"},{name:"奇虎搜索",key:"qihu.com"},{name:"一淘搜索",key:"etao.com"},{name:"搜酷",key:"soku.com"},{name:"宜搜",key:"easou.com"},{name:"UC搜索",key:"uc.cn"},{name:"好搜",key:"haosou.com"},{name:"神马搜索",key:"sm.cn"},{name:"中国搜索",key:"chinaso.com"},{name:"头条",key:"toutiao.com"},{name:"夸克搜索",key:"quark.cn"}].find(function(e){return-1<n.indexOf(e.key)}))&&(e=Object.assign(e,t),setCookie("setReferrer",JSON.stringify(e))))},customMdEvent=function(){function e(e,n){var t;sessionStorage.getItem("sdkSessionId")||(t=(new Date).getTime(),sessionStorage.setItem("sdkSessionId",t));var a={appCode:window.pageObj&&window.pageObj.appId||"",dsId:window.pageObj&&window.pageObj.contentType||"",dataId:window.pageObj&&window.pageObj._detailId||"",channel:$.getTerminal(),type:e,userOpenId:sessionStorage.getItem("sdkOpenId")||"",deviceType:$.detectOS(),sessionId:sessionStorage.getItem("sdkSessionId")||""},o="/fwebapi/visitor/digitalCard/event/report";2==n?(n=new Blob([JSON.stringify(a)],{type:"application/json"}),navigator.sendBeacon("/nportal"+o,n)):$require(["cmsAjax"],function(e){e.cmsAjax.postJson(o,a).then(function(e){})})}e(1),$("body").on("click","[roleBtn='tel']",function(){e(2)}),$("body").on("click","[roleBtn='wechat']",function(){e(4)}),$("body").on("click","[roleBtn='contacts']",function(){e(5)}),$("body").on("click","[roleBtn='gohome']",function(){e(3)}),$("body").on("click","[roleBtn='vcard']",function(){e(6)}),window.addEventListener("pagehide",function(){e(-1,2)})},customMd=function(){$require(["cmsAjax"],function(e){e.cmsAjax.get("/fwebapi/visitor/digitalCard/getWxMiniInfo").then(function(e){e&&e.data&&1==e.data.enabled&&"miniprogram"===window.__wxjs_environment&&wx.miniProgram&&!sessionStorage.getItem("sdkOpenId")&&($("body").append('<div class="wechatPrompt" style="position: fixed;bottom: 0;left: 0;z-index: 9999999;background: #000;color: #fff;width: 100%;padding: 10px 10px 10px 40px;display: flex;align-items: center;justify-content: space-between;">\n                        <svg t="1756955291832" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5940" width="128" height="128" style="position: absolute;left: 10px;top: 50%;transform: translateY(-50%);color: #f00;margin: 0;"><path d="M512 56.888889C261.688889 56.888889 56.888889 261.688889 56.888889 512s204.8 455.111111 455.111111 455.111111 455.111111-204.8 455.111111-455.111111-204.8-455.111111-455.111111-455.111111m0 853.333333c-221.866667 0-398.222222-176.355556-398.222222-398.222222s176.355556-398.222222 398.222222-398.222222 398.222222 176.355556 398.222222 398.222222-176.355556 398.222222-398.222222 398.222222" p-id="5941"></path><path d="M512 682.666667c-17.066667 0-28.444444 5.688889-39.822222 17.066666-11.377778 11.377778-17.066667 22.755556-17.066667 39.822223 0 17.066667 5.688889 28.444444 17.066667 39.822222 11.377778 11.377778 22.755556 17.066667 39.822222 17.066666 17.066667 0 28.444444-5.688889 39.822222-17.066666 11.377778-11.377778 17.066667-22.755556 17.066667-39.822222 0-17.066667-5.688889-28.444444-17.066667-39.822223-11.377778-11.377778-22.755556-17.066667-39.822222-17.066666z m-51.2-455.111111l17.066667 409.6h62.577777L563.2 227.555556H460.8z" p-id="5942"></path></svg>\n                        <p style="flex: 0 0 calc(100% - 120px);font-size: 12px;color: #ddd;">该网页需获取个人信息才可使用完整服务，建议授权使用完整服务。</p>\n                        <a href="javascript:;" style="flex: 0 0 100px;">使用完整服务 &gt;</a>\n                    </div>'),$(".wechatPrompt a").on("click",function(){var e="/pages/getUserData/index?detailUrl="+encodeURIComponent(location.href);wx.miniProgram.navigateTo({url:e})})),customMdEvent()}).catch(function(){customMdEvent()})})};function ttsPlay(){var e=$("[ttsPlay]");0<e.length&&e.each(function(e,n){var t,a,o,i,r,s=$(n);0==s.parents("[ttsPlay]").length&&(0<(n=s.closest("[class^='e_richText']")).length&&(t=n.attr("aid")||"",a=n.attr("tid")||"",o=n.attr("cid")||"",i=(i=n.attr("code")||"")&&i.substr(i.lastIndexOf(".")+1)),n="/npublic/commonjs/nouglify/audioPlay/ttsPlay.js",r={element:s},t&&a&&o&&i?(n="/npublic/commonjs/nouglify/audioPlay/audioPlay.js",r=_objectSpread(_objectSpread({},r),{},{aid:t,tid:a,cid:o,code:i}),$require([n],function(){new ttsPlay2(r)})):$require([n],function(){new ttsPlay(r)}))})}function wxPoint(){var e;0<$(".wx_poi_link").length&&((e=document.createElement("style")).innerHTML='.wx_poi_popover{display:none;position:fixed;width:100%;height:100%;z-index:999999999;left:0;top:0;background-color:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;}.wx_poi_con{background-color:#fff;border:1px solid #eee;padding:10px;border-radius:5px;box-shadow:0 2px 10px rgba(0,0,0,0.1);z-index:1000;width:800px;height:500px;max-width:96%;max-height:80%;}.wx_poi_popover p{height:26px;line-height:26px;}.wx_poi_popover p.name{display:flex;justify-content:space-between;}.wx_poi_popover p.name span{font-weight:bold;}.wx_poi_popover p.name svg{margin:0;}.wx_poi_popover::after{content:"";position:absolute;bottom:-10px;left:20px;margin-left:-5px;border-width:5px;border-style:solid;border-color:#ccc transparent transparent transparent;}.wx_poi_popover #wxMapCotainer{height:calc(100% - 52px);padding-top:5px;}',document.head.appendChild(e),$(".wx_poi_link").attr("href","javascript:;").css({color:"rgb(42 115 178)"}).prepend('<span class="wx_poi_icon"><svg t="1733280754431" class="icon" style="width:16px;height:16px;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5843" width="32" height="32"><path d="M511.981438 0A398.232179 398.232179 0 0 0 114.006018 397.97542c0 156.622585 191.541718 456.516321 289.366644 574.625156a140.44681 140.44681 0 0 0 217.217552 0C718.41514 854.491741 909.956859 554.598005 909.956859 397.97542A398.232179 398.232179 0 0 0 511.981438 0z m49.297601 924.330009a65.986892 65.986892 0 0 1-98.595201 0C352.020995 789.531882 191.033519 518.138322 191.033519 397.97542a320.94792 320.94792 0 0 1 641.895839 0c0 120.162901-160.987477 391.556462-271.650319 526.354589z" p-id="5844"></path><path d="M511.981438 205.406669a192.568752 192.568752 0 1 0 192.568752 192.568751A192.568752 192.568752 0 0 0 511.981438 205.406669z m0 308.110002a115.541251 115.541251 0 1 1 115.541252-115.541251 115.798009 115.798009 0 0 1-115.541252 115.541251z" p-id="5845"></path></svg></span>'),renderWxMap(),$("body").on("click",".wx_poi_link",function(){showPop({name:decodeURIComponent($(this).data("name")),address:decodeURIComponent($(this).data("address")),lng:decodeURIComponent($(this).data("longitude")),lat:decodeURIComponent($(this).data("latitude"))},$(this),!0)}))}var wxMap=null,wxMarkerLayer=null,wxInfoWindowLocation=null;function renderWxMap(){$require(["async!tMap"],function(){var e=$(".wx_poi_popover");0==e.length&&($("body").append('<div class="wx_poi_popover">\n                <div class="wx_poi_con">\n                    <p class="name"><span></span><a href="javascript:;" class="wx_poi_close"><svg t="1732698820322" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4415" width="32" height="32"><path d="M807.538939 256.459755a20.897959 20.897959 0 0 1 0 29.549714L571.099429 522.44898l236.43951 236.43951a20.897959 20.897959 0 0 1 0 29.549714l-29.549715 29.549714a20.897959 20.897959 0 0 1-29.549714 0L512 581.548408 275.56049 817.987918a20.897959 20.897959 0 0 1-29.549714 0l-29.549715-29.549714a20.897959 20.897959 0 0 1 0-29.549714L452.900571 522.44898 216.461061 286.009469a20.897959 20.897959 0 0 1 0-29.549714l29.549715-29.549714a20.897959 20.897959 0 0 1 29.549714 0L512 463.349551l236.43951-236.43951a20.897959 20.897959 0 0 1 29.549714 0l29.549715 29.549714z" p-id="4416"></path></svg></a></p>\n                    <p class="address"><span></span></p>\n                    <div id="wxMapCotainer"></div>\n                </div>\n            </div>'),e=$(".wx_poi_popover")),e.show(),wxMap=new TMap.Map(e.find("#wxMapCotainer")[0],{center:new TMap.LatLng(39.908823,116.39747),zoom:17}),e.hide(),e.on("click",".wx_poi_close",function(){e.hide()})})}function showPop(a,e,o){$require(["async!tMap"],function(){var e,n,t=$(".wx_poi_popover");o?(t.show(),t.find(".name span").text(a.name),t.find(".address span").text(a.address),wxMap.setCenter(new TMap.LatLng(a.lat,a.lng)),wxMap.setZoom(17),e=wxMap,n=a,wxMarkerLayer?wxMarkerLayer.updateGeometries([{id:"1",styleId:"myStyle",position:new TMap.LatLng(n.lat,n.lng)}]):wxMarkerLayer=new TMap.MultiMarker({map:e,styles:{myStyle:new TMap.MarkerStyle({width:20,height:30})},geometries:[{id:"1",styleId:"myStyle",position:new TMap.LatLng(n.lat,n.lng)}]})):t.hide()})}function accessLimit(){var e,n,t,a,o;isFrontEnv()&&location.hostname==tenant.domain&&(e=tenant.XSKey,n=localStorage.getItem("kt"+tenant.tenantId),t=+new Date,!isNaN(Number(n))&&36e5<t-Number(n)&&localStorage.removeItem("kt"+tenant.tenantId),e&&!n&&(a=e[9],o=e[10],"1"!=a&&"1"!=o||$require(["cmsAjax","/npublic/commonjs/jsencrypt.js"],function(n,e){var t=$.nrsa("designVue&".concat(+new Date),"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCdBbSMUKBY3wW8C/RFFwFoTHyO8xM67xBtgERb/4z6dqUq2ZeTagHUT6tbnuvhug0FNU9t/bzBc6KOivkzPToYYJG/RDzvdAJTjdvvvu3WQUpKOa0s0V3ehkKRoZPIFw3YnahtUrIe9es0V0LlTkOyFlH2M6rpceC7K0XgEs7lZwIDAQAB");n.cmsAjax.get("/fwebapi/visitor/lowcode/designToken/getToken",{},{headers:{authCode:t}}).then(function(e){try{n.cmsAjax.get("/fwebapi/visitor/lowcode/designToken/getI",{},{headers:{token:e.data.token}}).then(function(e){("1"==e.data.status&&"1"==a||"2"==e.data.status&&"1"==o)&&(location.href="/npublic/plugins/accessLimit/index.html")})}catch(e){}})})))}function getmeta(e){for(var n,t=document.getElementsByTagName("meta"),a=0;n=t[a++];)if(n.getAttribute("name")&&n.getAttribute("name").toLowerCase()===e)return encodeURIComponent(n.content)}function gray(){$require(["cmsAjax"],function(e){var n=window.location.origin+"/ndesigner/api/gray";e.cmsAjax.postJson(n).then(function(e){200==e.code&&($("html")[0].style="filter:progid:DXImageTransform.Microsoft.Basiclmage(grayscale=1);-webkit-filter:grayscale(100%);")})})}function festival(){isFrontEnv()&&$require(["cmsAjax"],function(e){e.cmsAjax.get("/fwebapi/cms/lowcode/festivalPendant/getSettings").then(function(e){var n;e.data&&200==e.data.code&&e.data.settings&&(1==(n=e.data.settings).location&&window.pageObj&&1!=window.pageObj.isHomePage||(e=n.showTime&&2==n.showTime.length&&n.nowTime>=n.showTime[0]&&n.nowTime<=n.showTime[1]||!n.showTime||0==n.showTime.length,n.isOpen&&e&&$require(["/npublic/commonjs/restival.js"],function(e){e.init(n)})))})})}function smartServiceInit(){isFrontEnv()&&!window.noSms&&$(window).on("mousemove scroll touchmove tap click keydown",function(){hasScroll||(hasScroll=!0,$require(["cmsAjax","pl_util"],function(e){var n=$.getSearch(),a=__ce.smartServiceUrl||"https://web-visitor.yun300.cn",t="".concat(a,"/visitormanager/intelligent/front/checkAndRegister?tenantId=").concat(tenant.tenantId,"&instance=").concat(tenant.bossProductInstance),o={account:localStorage.getItem("account_".concat(tenant.tenantId))};n.previewFlow&&(o.account=n.previewFlow),e.cmsAjax.postJson(t,o).then(function(t){var e;200==t.status&&t.data&&!function(e){var n=!1,t=JSON.parse(e.colorLayout).linkObj,a=window.pageObj?pageObj.pageId:"";a&&t&&(e=t.P,!isMo()||1!=tenant.mobileStatus&&6!=tenant.mobileStatus&&11!=tenant.mobileStatus||(e=t.M),-1<e.findIndex(function(e){return e.pageId==a})&&(n=!0));return n}(t.data.setting)&&(n.previewFlow||localStorage.setItem("account_".concat(tenant.tenantId),t.data.account),e="default",2==JSON.parse(t.data.setting.colorLayout).modelType&&(e="business"),$require(["css!/npublic/commonjs/smartService/them/".concat(e,".css"),"/npublic/commonjs/smartService/smartService.js"],function(e,n){t.data.domain=a;new n(t.data)}))})}))})}function preventFish(){var e=location.hostname,n=getCookie("realhost")||"";n&&n!=e&&(n="/repository/cheat?req="+e+"&rel="+n,$.ajax({url:n}))}function wxShare(){$require(["cmsAjax","/npublic/commonjs/jweixin/jweixin.js","pl_util"],function(e){var n={pageUrl:location.href,appCode:pageObj.appId,tid:pageObj.contentType,pageType:pageObj.pageType,isHomePage:pageObj.isHomePage,pageId:pageObj.pageId,contentId:pageObj._detailId,pageName:pageObj.name};e.cmsAjax.postJson("/fwebapi/cms/api/tdk/getWxShareInfo",n).then(function(e){var n,t=e.data;t.data&&(t=t.data),t.wxJsConfig&&(e=t.wxJsConfig,t=t.wxShareContent,n={title:t.title,desc:t.desc,link:location.href,imgUrl:function(e,n){if(!e)return"";var t=-1<e.indexOf("?")?e.split("?")[1]:"",e=e.split("?")[0],t=t?"?"+t+"&vv=ce":"?vv=ce";return e+"_"+n+"xaf"+e.substr(e.lastIndexOf("."))+t}($.handleDataImg(t.imgUrl),104)},wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),wx.ready(function(){wx.updateAppMessageShareData(n),wx.updateTimelineShareData(n)}))})})}$.detectOS=function(){var e=navigator.userAgent,n="未知";return e.includes("Android")?n="Android":e.includes("like Mac")&&e.includes("Mobile")?n="iOS":e.includes("HarmonyOS")?n="HarmonyOS":e.includes("Windows")?n="Windows":e.includes("Mac")?n="macOS":e.includes("Linux")&&(n="Linux"),n},$.getSearch=function(){var e=new Object,n=decodeURIComponent(location.href).match(/c-.*?\.html/);if(n)for(var t=n[0].substr(2),a=(t=t.substring(0,t.length-5)).split("&"),o=0;o<a.length;o++)e[a[o].split("=")[0]]=unescape(a[o].split("=")[1]);t=decodeURI(location.search);if(-1!=t.indexOf("?"))for(var i=t.substr(1).split("&"),r=0;r<i.length;r++)e[i[r].split("=")[0]]=unescape(i[r].split("=")[1]);return e},$.getTerminal=function(){return $.isWxMini()?1:$.isWechat()?2:$.isMo()?4:3},$.isWxMini=function(){return"miniprogram"===window.__wxjs_environment||"miniprogram"==navigator.userAgent.toLowerCase().match(/miniprogram/i)},$.isMo=function(){return Boolean(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))||$(window).width()<=768},$.isWechat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)};